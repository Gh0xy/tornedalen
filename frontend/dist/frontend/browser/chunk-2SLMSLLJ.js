import{a as B}from"./chunk-4AVEQE25.js";import{a as V,c as D,d as j,e as A,f as W,g as F,k as z,l as H,m as K,q as U}from"./chunk-JPVN4RV2.js";import{$ as P,B as _,Ba as w,C as b,Ca as L,H as g,K as p,M as o,N as r,P as M,Q as h,R as m,V as s,W as d,X as v,Y as R,_ as y,aa as C,ea as x,ga as T,ja as S,oa as O,pa as E,q as u,qa as I,r as f,ra as k,wa as N,z as n}from"./chunk-O2IPVIWS.js";function q(a,i){if(a&1&&(o(0,"span",22),s(1),x(2,"date"),r()),a&2){let e=m(2);n(),d(T(2,1,e.postToReply.date,"yyyy-MM-dd HH:mm"))}}function G(a,i){if(a&1&&(o(0,"span",22),s(1),x(2,"date"),r()),a&2){let e=m().$implicit;n(),d(T(2,1,e.date,"yyyy-MM-dd HH:mm"))}}function J(a,i){if(a&1&&(o(0,"li")(1,"p"),s(2),r(),o(3,"p"),s(4),r(),o(5,"p"),g(6,G,3,4,"span",11),r()()),a&2){let e=i.$implicit;n(2),d(e.author),n(2),d(e.content),n(2),p("ngIf",e.date)}}function X(a,i){if(a&1&&(o(0,"div")(1,"h3"),s(2),r(),o(3,"ul"),g(4,J,7,3,"li",23),r()()),a&2){let e=m(2);n(2),d(e.getTranslation("COMMENTS_SECTION")),n(2),p("ngForOf",e.postToReply.replies)}}function Q(a,i){if(a&1){let e=M();o(0,"div")(1,"div",7)(2,"div",8)(3,"h2"),s(4),r(),o(5,"p"),s(6),r(),o(7,"div",9)(8,"span",10),s(9),r(),s(10,"\xA0 "),g(11,q,3,4,"span",11),r()(),o(12,"div",12)(13,"h3"),s(14),r()(),o(15,"div",13)(16,"form",14),h("ngSubmit",function(){u(e);let l=m();return f(l.submitReply())}),o(17,"div",15)(18,"div",16)(19,"input",17),C("ngModelChange",function(l){u(e);let c=m();return P(c.author,l)||(c.author=l),f(l)}),r()(),o(20,"div",16)(21,"input",18),C("ngModelChange",function(l){u(e);let c=m();return P(c.email,l)||(c.email=l),f(l)}),r()()(),o(22,"div",19)(23,"textarea",20),C("ngModelChange",function(l){u(e);let c=m();return P(c.replyContent,l)||(c.replyContent=l),f(l)}),r()(),o(24,"button",21),s(25),r()()(),o(26,"div",12),g(27,X,5,2,"div",1),r()()()}if(a&2){let e=m();n(4),d(e.postToReply.subject),n(2),d(e.postToReply.content),n(3),d(e.postToReply.author),n(2),p("ngIf",e.postToReply.date),n(3),d(e.getTranslation("LEAVE_COMMENT")),n(5),y("ngModel",e.author),p("placeholder",e.getTranslation("AUTHOR")),n(2),y("ngModel",e.email),p("placeholder",e.getTranslation("EMAIL")),n(2),y("ngModel",e.replyContent),p("placeholder",e.getTranslation("WRITE_REPLY")),n(2),d(e.getTranslation("SUBMIT_REPLY")),n(2),p("ngIf",e.postToReply.replies&&e.postToReply.replies.length>0)}}function Z(a,i){if(a&1&&(o(0,"div")(1,"p"),s(2),r()()),a&2){let e=m();n(2),d(e.getTranslation("POST_NOT_FOUND"))}}var Y=class a{constructor(i,e,t,l){this.route=i;this.languageService=e;this.cdr=t;this.discussionService=l}postId=null;postToReply;replyContent="";subject="";author="";email="";content="";currentPage=1;repliesPerPage=5;totalReplies=0;translations={};ngOnInit(){this.postId=this.route.snapshot.paramMap.get("id"),this.postId?this.discussionService.h\u00E4mtaMedId(this.postId).subscribe(i=>{i?(this.postToReply=i,this.postToReply.subject=this.postToReply.\u00E4mne,this.postToReply.author=this.postToReply.f\u00F6rfattare,this.postToReply.content=this.postToReply.inl\u00E4gg,this.postToReply.replies&&this.postToReply.replies.length>0&&this.postToReply.replies.forEach(e=>{e.subject=e.\u00E4mne,e.author=e.f\u00F6rfattare,e.content=e.inl\u00E4gg}),this.totalReplies=this.postToReply.replies?.length||0,this.loadReplies()):console.error("Post not found")},i=>{console.error("Error fetching post:",i)}):console.error("No post ID found"),this.updateTranslations(),this.languageService.currentLanguage$.subscribe(()=>{this.updateTranslations(),this.cdr.detectChanges()})}loadReplies(){if(this.postToReply?.replies){let i=(this.currentPage-1)*this.repliesPerPage,e=i+this.repliesPerPage;this.postToReply.replies=this.postToReply.replies.slice(i,e),this.postToReply.replies.forEach(t=>{t.subject=t.\u00E4mne,t.author=t.f\u00F6rfattare,t.content=t.inl\u00E4gg})}}onPageChange(i){this.currentPage=i,this.loadReplies()}onRepliesPerPageChange(i){let e=i.target;this.repliesPerPage=Number(e.value),this.currentPage=1,this.loadReplies()}submitReply(){if(this.postToReply&&this.replyContent&&this.postId){let i={\u00E4mne:`Svar p\xE5: ${this.postToReply.\u00E4mne}`,f\u00F6rfattare:this.author||"Anonym",epost:this.email||"",inl\u00E4gg:this.replyContent};this.discussionService.skickaReply(this.postId,i).subscribe({next:()=>{this.replyContent="",this.resetForm(),this.ngOnInit()},error:()=>{alert("Kunde inte skicka svar.")}})}}resetForm(){this.subject="",this.author="",this.email="",this.content=""}updateTranslations(){let i=this.languageService.getLanguage(),e={REPLY_TO_POST:{sv:"Svara p\xE5 inl\xE4gg",en:"Reply to Post",fi:"Vastaa viestiin",me:"Vastaa viestiin",sa:"V\xE1stidit \u010D\xE1llosa"},LEAVE_COMMENT:{sv:"L\xE4mna en kommentar",en:"Leave a Comment",fi:"J\xE4t\xE4 kommentti",me:"J\xE4t\xE4 kommentti",sa:"\u010C\xE1jeha komment\xE1r"},SUBMIT_REPLY:{sv:"Skicka svar",en:"Submit Reply",fi:"L\xE4het\xE4 vastaus",me:"L\xE4het\xE4 vastaus",sa:"L\xE4het\xE4 vastaus"},COMMENTS_SECTION:{sv:"Kommentarer",en:"Comments",fi:"Kommentit",me:"Kommentit",sa:"Komment\xE1rat"},SHOW:{sv:"Visa",en:"Show",fi:"N\xE4yt\xE4",me:"N\xE4yt\xE4",sa:"\u010C\xE1jeha"},PREVIOUS:{sv:"F\xF6reg\xE5ende",en:"Previous",fi:"Edellinen",me:"Edellinen",sa:"Ovddit"},NEXT:{sv:"N\xE4sta",en:"Next",fi:"Seuraava",me:"Seuraava",sa:"V\xE1st\xE1dus"},PAGE:{sv:"Sida",en:"Page",fi:"Sivu",me:"Sivu",sa:"Siidu"},POST_NOT_FOUND:{sv:"Inl\xE4gget hittades inte",en:"Post not found",fi:"Viesti\xE4 ei l\xF6ytynyt",me:"Viesti\xE4 ei l\xF6ytynyt",sa:"\u010C\xE1llosa ii g\xE1vdnan"},AUTHOR:{sv:"F\xF6rfattare",en:"Author",fi:"Kirjoittaja",me:"Kirjoittaja",sa:"\u010C\xE1llit"},EMAIL:{sv:"E-post",en:"Email",fi:"S\xE4hk\xF6posti",me:"S\xE4hk\xF6posti",sa:"E-poasta"},WRITE_REPLY:{sv:"Skriv ett svar",en:"Write a reply",fi:"Kirjoita vastaus",me:"Kirjoita vastaus",sa:"\u010C\xE1llit v\xE1st\xE1dusa"}};for(let t in e)this.translations[t]=e[t][i]||t}getTranslation(i){return this.translations[i]||i}static \u0275fac=function(e){return new(e||a)(_(N),_(L),_(S),_(B))};static \u0275cmp=b({type:a,selectors:[["app-reply-to-post"]],decls:19,vars:12,consts:[[1,"reply-to-post-container"],[4,"ngIf"],[1,"pagination-controls"],["for","repliesPerPage"],["id","repliesPerPage",3,"change"],[3,"value"],[3,"click","disabled"],[1,"post-container"],[1,"go-to-post"],[1,"meta"],[1,"author"],["class","date",4,"ngIf"],[1,"replies-list"],[1,"reply-form"],[3,"ngSubmit"],[1,"author-email-row"],[1,"input-group"],["type","text","id","author","name","author","required","",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["type","email","id","email","name","email","required","",1,"form-input",3,"ngModelChange","ngModel","placeholder"],[1,"textarea-group"],["name","replyContent","id","replyContent","required","",1,"form-input","textarea-content",3,"ngModelChange","ngModel","placeholder"],["type","submit"],[1,"date"],[4,"ngFor","ngForOf"]],template:function(e,t){e&1&&(o(0,"div",0),g(1,Q,28,13,"div",1),o(2,"div",2)(3,"label",3),s(4),r(),o(5,"select",4),h("change",function(c){return t.onRepliesPerPageChange(c)}),o(6,"option",5),s(7,"10"),r(),o(8,"option",5),s(9,"25"),r(),o(10,"option",5),s(11,"100"),r()(),o(12,"button",6),h("click",function(){return t.onPageChange(t.currentPage-1)}),s(13),r(),o(14,"span"),s(15),r(),o(16,"button",6),h("click",function(){return t.onPageChange(t.currentPage+1)}),s(17),r()(),g(18,Z,3,1,"div",1),r()),e&2&&(n(),p("ngIf",t.postToReply),n(3),v("",t.getTranslation("SHOW"),":"),n(2),p("value",10),n(2),p("value",25),n(2),p("value",100),n(2),p("disabled",t.currentPage===1),n(),v(" ",t.getTranslation("PREVIOUS")," "),n(2),R("",t.getTranslation("PAGE")," ",t.currentPage,""),n(),p("disabled",t.currentPage*t.repliesPerPage>=t.totalReplies),n(),v(" ",t.getTranslation("NEXT")," "),n(),p("ngIf",!t.postToReply))},dependencies:[w,U,F,z,H,V,D,j,K,W,A,k,O,E,I],styles:['.post-container[_ngcontent-%COMP%]{background-color:#fafafa;border-radius:1px;box-shadow:none;margin-bottom:1.5rem;padding:1.5rem;position:relative;overflow:hidden;z-index:1}.post-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-1px;background-color:#00000008;border-radius:1px;z-index:-1}.go-to-post[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.05);padding:1.5rem;margin-bottom:1.5rem;position:relative;border-radius:1px}.go-to-post[_ngcontent-%COMP%]:before{display:none}.go-to-post[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:#333;margin-bottom:1rem}.go-to-post[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.15;color:#555;margin-top:1.2rem;margin-bottom:1.2rem}.meta[_ngcontent-%COMP%]{font-size:.9rem;color:#777}.meta[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .meta[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{margin-right:10px}.author-email-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.textarea-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem}.textarea-content[_ngcontent-%COMP%]{min-height:50px;resize:vertical}.reply-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem;background-color:#fff;border-radius:6px;box-shadow:0 4px 6px #0000001a}.reply-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.6rem;color:#333;margin-bottom:1rem}.form-input[_ngcontent-%COMP%]{padding:.8rem;font-size:1rem;margin-top:.5rem;margin-bottom:1rem;border-radius:6px;border:1px solid #ddd;background-color:#fff;transition:border-color .3s}.form-input[_ngcontent-%COMP%]:focus{border-color:#47e;box-shadow:0 0 8px #47e3}button[type=submit][_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#47e;color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:background-color .3s,transform .2s}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#35c;transform:translateY(-2px)}button[type=submit][_ngcontent-%COMP%]:active{transform:translateY(1px)}.replies-list[_ngcontent-%COMP%]{margin-top:0rem;padding-top:1rem;border-top:1px solid #ddd}.replies-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.05);padding:1rem;margin-top:1rem;border-radius:1px;position:relative}.replies-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{display:none}.replies-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#555}.replies-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.6rem;color:#333}.date[_ngcontent-%COMP%]{font-size:.85rem;color:#777}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 15px;background-color:#007bff;color:#fff;border:none;cursor:pointer}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc}']})};export{Y as ReplyToPostComponent};
