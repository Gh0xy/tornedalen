import{a as oe}from"./chunk-4AVEQE25.js";import{a as Y,c as q,d as X,e as Q,f as Z,g as $,k as ee,l as te,m as ne,q as ie}from"./chunk-JPVN4RV2.js";import{$ as b,B as h,Ba as J,C as I,Ca as K,H as S,K as u,L as k,M as o,N as r,P as T,Q as f,R as M,S as P,U as L,V as s,W as p,X as N,Y as D,_,a as y,aa as v,b as w,c as C,da as j,ea as V,f as x,ga as A,ha as R,ja as F,k as E,oa as U,pa as W,q as g,qa as B,r as m,ra as z,ya as H,z as n,za as G}from"./chunk-O2IPVIWS.js";var O=class l{posts=[];constructor(){let i=localStorage.getItem("posts");i&&(this.posts=JSON.parse(i).map(t=>w(y({},t),{date:new Date(t.date)})))}getPosts(){return x(this.posts)}getPostById(i){let t=this.posts.find(e=>e.id===i);return x(t)}addPost(i){return new C(t=>{try{this.posts.unshift(i),localStorage.setItem("posts",JSON.stringify(this.posts)),t.next(i),t.complete()}catch{t.error("N\xE5got gick fel vid sparandet!")}})}addReplyToPost(i,t){return new C(e=>{try{let a=this.posts.find(d=>d.id===i);a?(a.replies=a.replies||[],a.replies.unshift(t),localStorage.setItem("posts",JSON.stringify(this.posts)),e.next(a),e.complete()):e.error("Inl\xE4gget finns inte!")}catch{e.error("N\xE5got gick fel vid sparandet av svaret!")}})}deletePost(i){return new C(t=>{try{this.posts=this.posts.filter(e=>e.id!==i),localStorage.setItem("posts",JSON.stringify(this.posts)),t.next(this.posts),t.complete()}catch{t.error("N\xE5got gick fel vid radering!")}})}static \u0275fac=function(t){return new(t||l)};static \u0275prov=E({token:l,factory:l.\u0275fac,providedIn:"root"})};var le=l=>["/reply-to-post",l];function ce(l,i){if(l&1&&(o(0,"li")(1,"h4"),s(2),r(),o(3,"p",28),s(4),r(),o(5,"div",29)(6,"span",30),s(7),r(),o(8,"span",31),s(9),V(10,"date"),r()(),o(11,"div",32)(12,"button",33),s(13),r()()()),l&2){let t=i.$implicit,e=M(2);n(2),p(t.subject),n(2),p(t.content),n(3),p(t.author),n(2),p(A(10,6,t.date,"yyyy-MM-dd HH:mm")),n(3),u("routerLink",j(9,le,t.id)),n(),p(e.translations.SHOW)}}function pe(l,i){if(l&1&&(o(0,"ul",26),S(1,ce,14,11,"li",27),r()),l&2){let t=M();n(),u("ngForOf",t.posts)}}function de(l,i){if(l&1&&(o(0,"p",34),s(1),r()),l&2){let t=M();n(),p(t.translations.EMPTY_MSG)}}var re=class l{constructor(i,t,e,a,d){this.router=i;this.postService=t;this.languageService=e;this.cdr=a;this.discussionService=d}posts=[];subject="";author="";email="";content="";currentPage=1;postsPerPage=10;totalPosts=0;isModalOpen=!1;translations={};translationKeys={DISCUSSION_TITLE:"",CREATE_POST:"",SUBJECT:"",AUTHOR:"",EMAIL:"",CONTENT:"",SUBMIT_POST:"",FILL_ALL_FIELDS:"",SHOW:"",PREVIOUS:"",NEXT:"",PAGE:"",EMPTY_MSG:""};ngOnInit(){this.loadPosts(),this.updateTranslations(),this.languageService.currentLanguage$.subscribe(()=>{this.updateTranslations(),this.cdr.detectChanges()})}loadPosts(){this.discussionService.h\u00E4mtaAlla().subscribe(i=>{let t=i.filter(e=>!("parent"in e&&e.parent!==null));this.posts=t.map(e=>({id:String(e.id),subject:e.\u00E4mne,author:e.f\u00F6rfattare,email:e.epost||"",content:e.inl\u00E4gg,date:new Date})),this.totalPosts=this.posts.length,this.posts=this.posts.sort((e,a)=>a.date.getTime()-e.date.getTime()).slice((this.currentPage-1)*this.postsPerPage,this.currentPage*this.postsPerPage)})}onPageChange(i){this.currentPage=i,this.loadPosts()}onPostsPerPageChange(i){let t=i.target;this.postsPerPage=Number(t.value),this.currentPage=1,this.loadPosts()}openModal(){this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}createPost(){if(!this.subject||!this.author||!this.email||!this.content){alert(this.translations.FILL_ALL_FIELDS);return}let i={\u00E4mne:this.subject,f\u00F6rfattare:this.author,epost:this.email,inl\u00E4gg:this.content};this.discussionService.skicka(i).subscribe({next:()=>{alert("Inl\xE4gget skickades!"),this.resetForm(),this.closeModal(),this.loadPosts()},error:()=>{alert("N\xE5got gick fel!")}}),this.closeModal()}resetForm(){this.subject="",this.author="",this.email="",this.content=""}navigateTo(i){this.router.navigate([i])}updateTranslations(){let i=this.languageService.getLanguage(),t={DISCUSSION_TITLE:{sv:"Inl\xE4gg",en:"Posts",fi:"Viestit",me:"Viestit",sa:"\u010C\xE1llosat"},CREATE_POST:{sv:"Skapa nytt inl\xE4gg",en:"Create a new post",fi:"Luo uusi viesti",me:"Luo uusi viesti",sa:"\u010C\xE1jeha o\u0111\u0111a \u010D\xE1llosa"},SUBJECT:{sv:"\xC4mne",en:"Subject",fi:"Aihe",me:"Aihe",sa:"\xC1\u0161\u0161i"},AUTHOR:{sv:"F\xF6rfattare",en:"Author",fi:"Kirjoittaja",me:"Kirjoittaja",sa:"\u010C\xE1llit"},EMAIL:{sv:"E-post",en:"Email",fi:"S\xE4hk\xF6posti",me:"S\xE4hk\xF6posti",sa:"E-poasta"},CONTENT:{sv:"Inl\xE4gg",en:"Content",fi:"Sis\xE4lt\xF6",me:"Sis\xE4lt\xF6",sa:"Sisdoallu"},SUBMIT_POST:{sv:"Skicka Inl\xE4gg",en:"Submit Post",fi:"L\xE4het\xE4 viesti",me:"L\xE4het\xE4 viesti",sa:"S\xE1dde \u010D\xE1llosa"},FILL_ALL_FIELDS:{sv:"Var v\xE4nlig fyll i alla obligatoriska f\xE4lt!",en:"Please fill in all required fields!",fi:"T\xE4yt\xE4 kaikki pakolliset kent\xE4t!",me:"T\xE4yt\xE4 kaikki pakolliset kent\xE4t!",sa:"Fylli buot d\xE1rbba\u0161la\u0161 g\xE1vppit!"},SHOW:{sv:"Visa",en:"Show",fi:"N\xE4yt\xE4",me:"N\xE4yt\xE4",sa:"\u010C\xE1jeha"},PREVIOUS:{sv:"F\xF6reg\xE5ende",en:"Previous",fi:"Edellinen",me:"Edellinen",sa:"Ovddit"},NEXT:{sv:"N\xE4sta",en:"Next",fi:"Seuraava",me:"Seuraava",sa:"V\xE1st\xE1dus"},PAGE:{sv:"Sida",en:"Page",fi:"Sivu",me:"Sivu",sa:"Siidu"},EMPTY_MSG:{sv:"Inga inl\xE4gg \xE4nnu \u2013 bli den f\xF6rsta att posta!",en:"No posts yet \u2013 be the first to post!",fi:"Ei viestej\xE4 viel\xE4 \u2013 ole ensimm\xE4inen!",me:"Ei viestej\xE4 viel\xE4 \u2013 ole ensimm\xE4inen!",sa:"Ii leat \u010D\xE1llosat \u2013 leat vuostta\u0161 \u010D\xE1llit!"}};for(let e in t)this.translations[e]=t[e][i]||e}static \u0275fac=function(t){return new(t||l)(h(H),h(O),h(K),h(F),h(oe))};static \u0275cmp=I({type:l,selectors:[["app-discussion"]],decls:48,vars:30,consts:[["emptyMsg",""],[1,"article-text"],[1,"page-header"],[1,"page-title"],[1,"elegant-button",3,"click"],[1,"post-list-container"],["class","post-list",4,"ngIf","ngIfElse"],[1,"pagination-controls"],["for","postsPerPage"],["id","postsPerPage",3,"change"],[3,"value"],[3,"click","disabled"],[1,"modal"],[1,"modal-content"],[1,"close-button",3,"click"],[1,"discussion-form"],[3,"ngSubmit"],["for","subject"],["type","text","id","subject","name","subject","required","",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["for","author"],["type","text","id","author","name","author","required","",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["for","email"],["type","email","id","email","name","email","required","",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["for","content"],["id","content","name","content","required","",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["type","submit"],[1,"post-list"],[4,"ngFor","ngForOf"],[1,"content"],[1,"meta"],[1,"author"],[1,"date"],[1,"view-post-button"],[3,"routerLink"],[1,"empty-hint"]],template:function(t,e){if(t&1){let a=T();o(0,"div",1)(1,"div",2)(2,"h1",3),s(3),r(),o(4,"button",4),f("click",function(){return g(a),m(e.openModal())}),s(5),r()(),o(6,"div",5),S(7,pe,2,1,"ul",6),r(),S(8,de,2,1,"ng-template",null,0,R),o(10,"div",7)(11,"label",8),s(12),r(),o(13,"select",9),f("change",function(c){return g(a),m(e.onPostsPerPageChange(c))}),o(14,"option",10),s(15,"10"),r(),o(16,"option",10),s(17,"25"),r(),o(18,"option",10),s(19,"100"),r()(),o(20,"button",11),f("click",function(){return g(a),m(e.onPageChange(e.currentPage-1))}),s(21),r(),o(22,"span"),s(23),r(),o(24,"button",11),f("click",function(){return g(a),m(e.onPageChange(e.currentPage+1))}),s(25),r()(),o(26,"div",12)(27,"div",13)(28,"span",14),f("click",function(){return g(a),m(e.closeModal())}),s(29,"\xD7"),r(),o(30,"div",15)(31,"h3"),s(32),r(),o(33,"form",16),f("ngSubmit",function(){return g(a),m(e.createPost())}),o(34,"label",17),s(35),r(),o(36,"input",18),v("ngModelChange",function(c){return g(a),b(e.subject,c)||(e.subject=c),m(c)}),r(),o(37,"label",19),s(38),r(),o(39,"input",20),v("ngModelChange",function(c){return g(a),b(e.author,c)||(e.author=c),m(c)}),r(),o(40,"label",21),s(41),r(),o(42,"input",22),v("ngModelChange",function(c){return g(a),b(e.email,c)||(e.email=c),m(c)}),r(),o(43,"label",23),s(44),r(),o(45,"textarea",24),v("ngModelChange",function(c){return g(a),b(e.content,c)||(e.content=c),m(c)}),r(),o(46,"button",25),s(47),r()()()()()()}if(t&2){let a=L(9);n(3),p(e.translations.DISCUSSION_TITLE),n(2),p(e.translations.CREATE_POST),n(2),u("ngIf",e.posts.length>0)("ngIfElse",a),n(5),N("",e.translations.SHOW,":"),n(2),u("value",10),n(2),u("value",25),n(2),u("value",100),n(2),u("disabled",e.currentPage===1),n(),p(e.translations.PREVIOUS),n(2),D("",e.translations.PAGE," ",e.currentPage,""),n(),u("disabled",e.currentPage*e.postsPerPage>=e.totalPosts),n(),p(e.translations.NEXT),n(),k("show",e.isModalOpen),n(6),p(e.translations.CREATE_POST),n(3),p(e.translations.SUBJECT),n(),P("placeholder",e.translations.SUBJECT),_("ngModel",e.subject),n(2),p(e.translations.AUTHOR),n(),P("placeholder",e.translations.AUTHOR),_("ngModel",e.author),n(2),p(e.translations.EMAIL),n(),P("placeholder",e.translations.EMAIL),_("ngModel",e.email),n(2),p(e.translations.CONTENT),n(),P("placeholder",e.translations.CONTENT),_("ngModel",e.content),n(2),p(e.translations.SUBMIT_POST)}},dependencies:[J,G,ie,$,ee,te,Y,q,X,ne,Z,Q,z,U,W,B],styles:['.discussion-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}.article-text[_ngcontent-%COMP%]{width:100%;margin-right:0;padding:10px 0}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 15px;background-color:#007bff;color:#fff;border:none;cursor:pointer}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc}.post-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border:2px solid #ccc;border-radius:8px;margin:15px 0;padding:20px;background-color:#f9f9f9;box-shadow:0 2px 4px #0000001a;width:90%;min-height:150px;overflow:hidden;display:flex;flex-direction:column}.post-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:10px;color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.post-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:.9em;color:#666;margin-top:10px}.post-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-bottom:15px;font-size:1em;color:#444;overflow-wrap:break-word;word-wrap:break-word;flex-grow:1;overflow-y:auto}.elegant-button[_ngcontent-%COMP%]{background-color:transparent;color:#2e2e2e;border:2px solid #aaa;padding:.75rem 1.5rem;font-size:1.1rem;font-family:Georgia,serif;letter-spacing:.5px;border-radius:6px;cursor:pointer;transition:all .3s ease;display:inline-block;margin:1rem auto;text-align:center}.elegant-button[_ngcontent-%COMP%]:hover{background-color:#f4f4f4;border-color:#666;color:#1a1a1a}.view-post-button[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.view-post-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:2px solid #4CAF50;padding:8px 16px;font-size:14px;font-family:Arial,sans-serif;border-radius:25px;cursor:pointer;transition:background-color .3s ease,transform .2s ease}.view-post-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#45a049;transform:scale(1.1)}.view-post-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 10px #48b448cc}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;text-align:center;margin:0 auto}.page-title[_ngcontent-%COMP%]{text-align:center;font-size:2.8rem;font-family:Georgia,serif;color:#2e2e2e;margin-top:3rem;margin-bottom:0rem;letter-spacing:.5px;position:relative}.page-title[_ngcontent-%COMP%]:after{content:"";display:block;width:60px;height:2px;background-color:#aaa;margin:.75rem auto 0;opacity:.5}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:10;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#00000080;justify-content:center;align-items:center}.modal.show[_ngcontent-%COMP%]{display:flex}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:10px;max-width:600px;width:90%;box-shadow:0 4px 12px #0000004d;position:relative;display:flex;flex-direction:column}.close-button[_ngcontent-%COMP%]{position:absolute;right:1rem;top:1rem;font-size:1.8rem;cursor:pointer;color:#333;transition:color .3s}.close-button[_ngcontent-%COMP%]:hover{color:#47e}.discussion-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-input[_ngcontent-%COMP%]{padding:1rem;font-size:1rem;margin-top:1rem;margin-bottom:1rem;border-radius:6px;border:1px solid #ddd;background-color:#f9f9f9;transition:border-color .3s;width:94%}.form-input[_ngcontent-%COMP%]:focus{border-color:#47e;box-shadow:0 0 8px #47e3}button[type=submit][_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#47e;color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:background-color .3s,transform .2s}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#35c;transform:translateY(-2px)}button[type=submit][_ngcontent-%COMP%]:active{transform:translateY(1px)}.discussion-content[_ngcontent-%COMP%]{flex-grow:1;padding:1rem;overflow-y:auto}.discussion-form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding-left:4rem;width:100%;height:100%}.discussion-form[_ngcontent-%COMP%]{width:92%;display:flex;flex-direction:column;padding:1.5rem;background-color:#fff;border-radius:8px;box-shadow:0 10px 20px #0000001a;margin-top:2.5rem;border:1px solid #ddd}.discussion-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1.5rem;font-size:1.8rem;text-align:center;font-family:Georgia,serif;font-weight:600;color:#333;font-weight:700}.discussion-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-top:1.2rem;color:#444}.discussion-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .discussion-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:1rem;font-size:1.1rem;margin-top:.75rem;border-radius:6px;border:1px solid #ddd;background-color:#f9f9f9;transition:all .3s ease}.discussion-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .discussion-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#47e;box-shadow:0 0 8px #47e3}.discussion-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:180px;resize:vertical}.discussion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1rem;background-color:#47e;color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:background-color .3s,transform .2s}.discussion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#35c;transform:translateY(-2px)}.discussion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}']})};export{re as DiscussionComponent};
