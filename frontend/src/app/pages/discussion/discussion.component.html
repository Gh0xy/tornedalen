<div class="article-text">
  <div class="page-header">
 <h1 class="page-title">{{ getTranslation('DISCUSSION_TITLE') }}</h1>
  <!-- Button to open the modal -->
  <button class="elegant-button" (click)="openModal()">{{ getTranslation('CREATE_POST') }}</button>
</div>
  
  <div class="post-list-container">
  <!-- Lista över alla sparade inlägg -->
  <ul class="post-list" *ngIf="posts.length; else emptyMsg">
    <li *ngFor="let p of posts">
      <h4>{{ p.subject }}</h4>
      <p class="content">{{ p.content }}</p>
      <div class="meta">
        <span class="author">{{ p.author }} </span>
        <span class="date">{{ p.date | date:'yyyy-MM-dd HH:mm' }}</span>
      </div>

      <div class="view-post-button"> 
      <button [routerLink]="['/reply-to-post', p.id]">Gå till inlägg</button>
    </div>
    </li>
  </ul>
</div>

  <!-- Visas om det inte finns några inlägg ännu -->
  <ng-template #emptyMsg>
    <p class="empty-hint">Inga inlägg ännu – bli den första att posta!</p>
  </ng-template>

  <div class="pagination-controls">
    <label for="postsPerPage">Visa:</label>
    <select id="postsPerPage" (change)="onPostsPerPageChange($event)">
      <option [value]="10">10</option>
      <option [value]="25">25</option>
      <option [value]="100">100</option>
    </select>

    <button (click)="onPageChange(currentPage - 1)" [disabled]="currentPage === 1">Föregående</button>
    <span>Sida {{ currentPage }}</span>
    <button (click)="onPageChange(currentPage + 1)" [disabled]="currentPage * postsPerPage >= totalPosts">Nästa</button>
  </div>

  <!-- === Din befintliga modal fortsätter som tidigare === -->
  <div class="modal" [class.show]="isModalOpen"> … </div>
</div>
 

  <!-- Modal -->
  <div class="modal" [class.show]="isModalOpen">
    <div class="modal-content">
      <span class="close-button" (click)="closeModal()">&times;</span>

      <!-- Form -->
      <div class="discussion-form">
        <h3>{{ getTranslation('CREATE_POST') }}</h3>
        <form (ngSubmit)="createPost()">
          <label for="subject">{{ getTranslation('SUBJECT') }}</label>
          <input
            type="text"
            id="subject"
            [(ngModel)]="subject"
            name="subject"
            required
            placeholder="{{ getTranslation('SUBJECT') }}"
            class="form-input"
          />

          <label for="author">{{ getTranslation('AUTHOR') }}</label>
          <input
            type="text"
            id="author"
            [(ngModel)]="author"
            name="author"
            required
            placeholder="{{ getTranslation('AUTHOR') }}"
            class="form-input"
          />

          <label for="email">{{ getTranslation('EMAIL') }}</label>
          <input
            type="email"
            id="email"
            [(ngModel)]="email"
            name="email"
            required
            placeholder="{{ getTranslation('EMAIL') }}"
            class="form-input"
          />

          <label for="content">{{ getTranslation('CONTENT') }}</label>
          <textarea
            id="content"
            [(ngModel)]="content"
            name="content"
            required
            placeholder="{{ getTranslation('CONTENT') }}"
            class="form-input"
          ></textarea>

          <button type="submit">{{ getTranslation('SUBMIT_POST') }}</button>
        </form>
      </div>
    </div>
  </div>