import{a as Z}from"./chunk-KWELZJWS.js";import{a as z,b as B,c as H,d as G,e as K,f as Y,h as q,i as J,j as X,n as Q}from"./chunk-FDYZ3ILD.js";import{$ as C,A as h,Aa as U,B as S,Ba as W,G as M,J as u,K as O,L as n,M as i,O as x,P as f,Q as v,R as _,T as y,U as r,V as l,W as w,X as E,Z as P,_ as b,ca as I,da as T,fa as k,ga as L,ia as D,na as N,oa as V,p,pa as j,q as g,qa as A,xa as R,y as t,ya as F}from"./chunk-7DS7QYNX.js";var ee=c=>["/reply-to-post",c];function te(c,a){if(c&1&&(n(0,"li")(1,"h4"),r(2),i(),n(3,"p",28),r(4),i(),n(5,"div",29)(6,"span",30),r(7),i(),n(8,"span",31),r(9),T(10,"date"),i()(),n(11,"div",32)(12,"button",33),r(13),i()()()),c&2){let o=a.$implicit,e=v(2);t(2),l(o.subject),t(2),l(o.content),t(3),l(o.author),t(2),l(k(10,6,o.date,"yyyy-MM-dd HH:mm")),t(3),u("routerLink",I(9,ee,o.id)),t(),l(e.translations.SHOW)}}function ne(c,a){if(c&1&&(n(0,"ul",26),M(1,te,14,11,"li",27),i()),c&2){let o=v();t(),u("ngForOf",o.posts)}}function ie(c,a){if(c&1&&(n(0,"p",34),r(1),i()),c&2){let o=v();t(),l(o.translations.EMPTY_MSG)}}var $=class c{constructor(a,o,e,d){this.router=a;this.postService=o;this.languageService=e;this.cdr=d}posts=[];subject="";author="";email="";content="";currentPage=1;postsPerPage=10;totalPosts=0;isModalOpen=!1;translations={};translationKeys={DISCUSSION_TITLE:"",CREATE_POST:"",SUBJECT:"",AUTHOR:"",EMAIL:"",CONTENT:"",SUBMIT_POST:"",FILL_ALL_FIELDS:"",SHOW:"",PREVIOUS:"",NEXT:"",PAGE:"",EMPTY_MSG:""};ngOnInit(){this.loadPosts(),this.updateTranslations(),this.languageService.currentLanguage$.subscribe(()=>{this.updateTranslations(),this.cdr.detectChanges()})}loadPosts(){this.postService.getPosts().subscribe(a=>{this.totalPosts=a.length,this.posts=a.sort((o,e)=>e.date.getTime()-o.date.getTime()).slice((this.currentPage-1)*this.postsPerPage,this.currentPage*this.postsPerPage)})}onPageChange(a){this.currentPage=a,this.loadPosts()}onPostsPerPageChange(a){let o=a.target;this.postsPerPage=Number(o.value),this.currentPage=1,this.loadPosts()}openModal(){this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}createPost(){if(!this.subject||!this.author||!this.email||!this.content){alert(this.translations.FILL_ALL_FIELDS);return}let a={id:new Date().toISOString(),subject:this.subject,author:this.author,email:this.email,content:this.content,date:new Date};this.closeModal(),this.postService.addPost(a).subscribe(o=>{this.posts.unshift(o),this.resetForm()})}resetForm(){this.subject="",this.author="",this.email="",this.content=""}navigateTo(a){this.router.navigate([a])}updateTranslations(){let a=this.languageService.getLanguage(),o={DISCUSSION_TITLE:{sv:"Inl\xE4gg",en:"Posts",fi:"Viestit",me:"Viestit",sa:"\u010C\xE1llosat"},CREATE_POST:{sv:"Skapa nytt inl\xE4gg",en:"Create a new post",fi:"Luo uusi viesti",me:"Luo uusi viesti",sa:"\u010C\xE1jeha o\u0111\u0111a \u010D\xE1llosa"},SUBJECT:{sv:"\xC4mne",en:"Subject",fi:"Aihe",me:"Aihe",sa:"\xC1\u0161\u0161i"},AUTHOR:{sv:"F\xF6rfattare",en:"Author",fi:"Kirjoittaja",me:"Kirjoittaja",sa:"\u010C\xE1llit"},EMAIL:{sv:"E-post",en:"Email",fi:"S\xE4hk\xF6posti",me:"S\xE4hk\xF6posti",sa:"E-poasta"},CONTENT:{sv:"Inl\xE4gg",en:"Content",fi:"Sis\xE4lt\xF6",me:"Sis\xE4lt\xF6",sa:"Sisdoallu"},SUBMIT_POST:{sv:"Skicka Inl\xE4gg",en:"Submit Post",fi:"L\xE4het\xE4 viesti",me:"L\xE4het\xE4 viesti",sa:"S\xE1dde \u010D\xE1llosa"},FILL_ALL_FIELDS:{sv:"Var v\xE4nlig fyll i alla obligatoriska f\xE4lt!",en:"Please fill in all required fields!",fi:"T\xE4yt\xE4 kaikki pakolliset kent\xE4t!",me:"T\xE4yt\xE4 kaikki pakolliset kent\xE4t!",sa:"Fylli buot d\xE1rbba\u0161la\u0161 g\xE1vppit!"},SHOW:{sv:"Visa",en:"Show",fi:"N\xE4yt\xE4",me:"N\xE4yt\xE4",sa:"\u010C\xE1jeha"},PREVIOUS:{sv:"F\xF6reg\xE5ende",en:"Previous",fi:"Edellinen",me:"Edellinen",sa:"Ovddit"},NEXT:{sv:"N\xE4sta",en:"Next",fi:"Seuraava",me:"Seuraava",sa:"V\xE1st\xE1dus"},PAGE:{sv:"Sida",en:"Page",fi:"Sivu",me:"Sivu",sa:"Siidu"},EMPTY_MSG:{sv:"Inga inl\xE4gg \xE4nnu \u2013 bli den f\xF6rsta att posta!",en:"No posts yet \u2013 be the first to post!",fi:"Ei viestej\xE4 viel\xE4 \u2013 ole ensimm\xE4inen!",me:"Ei viestej\xE4 viel\xE4 \u2013 ole ensimm\xE4inen!",sa:"Ii leat \u010D\xE1llosat \u2013 leat vuostta\u0161 \u010D\xE1llit!"}};for(let e in o)this.translations[e]=o[e][a]||e}static \u0275fac=function(o){return new(o||c)(h(R),h(Z),h(W),h(D))};static \u0275cmp=S({type:c,selectors:[["app-discussion"]],decls:48,vars:30,consts:[["emptyMsg",""],[1,"article-text"],[1,"page-header"],[1,"page-title"],[1,"elegant-button",3,"click"],[1,"post-list-container"],["class","post-list",4,"ngIf","ngIfElse"],[1,"pagination-controls"],["for","postsPerPage"],["id","postsPerPage",3,"change"],[3,"value"],[3,"click","disabled"],[1,"modal"],[1,"modal-content"],[1,"close-button",3,"click"],[1,"discussion-form"],[3,"ngSubmit"],["for","subject"],["type","text","id","subject","name","subject","required","",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["for","author"],["type","text","id","author","name","author","required","",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["for","email"],["type","email","id","email","name","email","required","",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["for","content"],["id","content","name","content","required","",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["type","submit"],[1,"post-list"],[4,"ngFor","ngForOf"],[1,"content"],[1,"meta"],[1,"author"],[1,"date"],[1,"view-post-button"],[3,"routerLink"],[1,"empty-hint"]],template:function(o,e){if(o&1){let d=x();n(0,"div",1)(1,"div",2)(2,"h1",3),r(3),i(),n(4,"button",4),f("click",function(){return p(d),g(e.openModal())}),r(5),i()(),n(6,"div",5),M(7,ne,2,1,"ul",6),i(),M(8,ie,2,1,"ng-template",null,0,L),n(10,"div",7)(11,"label",8),r(12),i(),n(13,"select",9),f("change",function(s){return p(d),g(e.onPostsPerPageChange(s))}),n(14,"option",10),r(15,"10"),i(),n(16,"option",10),r(17,"25"),i(),n(18,"option",10),r(19,"100"),i()(),n(20,"button",11),f("click",function(){return p(d),g(e.onPageChange(e.currentPage-1))}),r(21),i(),n(22,"span"),r(23),i(),n(24,"button",11),f("click",function(){return p(d),g(e.onPageChange(e.currentPage+1))}),r(25),i()(),n(26,"div",12)(27,"div",13)(28,"span",14),f("click",function(){return p(d),g(e.closeModal())}),r(29,"\xD7"),i(),n(30,"div",15)(31,"h3"),r(32),i(),n(33,"form",16),f("ngSubmit",function(){return p(d),g(e.createPost())}),n(34,"label",17),r(35),i(),n(36,"input",18),C("ngModelChange",function(s){return p(d),b(e.subject,s)||(e.subject=s),g(s)}),i(),n(37,"label",19),r(38),i(),n(39,"input",20),C("ngModelChange",function(s){return p(d),b(e.author,s)||(e.author=s),g(s)}),i(),n(40,"label",21),r(41),i(),n(42,"input",22),C("ngModelChange",function(s){return p(d),b(e.email,s)||(e.email=s),g(s)}),i(),n(43,"label",23),r(44),i(),n(45,"textarea",24),C("ngModelChange",function(s){return p(d),b(e.content,s)||(e.content=s),g(s)}),i(),n(46,"button",25),r(47),i()()()()()()}if(o&2){let d=y(9);t(3),l(e.translations.DISCUSSION_TITLE),t(2),l(e.translations.CREATE_POST),t(2),u("ngIf",e.posts.length>0)("ngIfElse",d),t(5),w("",e.translations.SHOW,":"),t(2),u("value",10),t(2),u("value",25),t(2),u("value",100),t(2),u("disabled",e.currentPage===1),t(),l(e.translations.PREVIOUS),t(2),E("",e.translations.PAGE," ",e.currentPage,""),t(),u("disabled",e.currentPage*e.postsPerPage>=e.totalPosts),t(),l(e.translations.NEXT),t(),O("show",e.isModalOpen),t(6),l(e.translations.CREATE_POST),t(3),l(e.translations.SUBJECT),t(),_("placeholder",e.translations.SUBJECT),P("ngModel",e.subject),t(2),l(e.translations.AUTHOR),t(),_("placeholder",e.translations.AUTHOR),P("ngModel",e.author),t(2),l(e.translations.EMAIL),t(),_("placeholder",e.translations.EMAIL),P("ngModel",e.email),t(2),l(e.translations.CONTENT),t(),_("placeholder",e.translations.CONTENT),P("ngModel",e.content),t(2),l(e.translations.SUBMIT_POST)}},dependencies:[U,F,Q,Y,q,J,z,B,H,X,K,G,A,N,V,j],styles:['.discussion-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}.article-text[_ngcontent-%COMP%]{width:100%;margin-right:0;padding:10px 0}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 15px;background-color:#007bff;color:#fff;border:none;cursor:pointer}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc}.post-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border:2px solid #ccc;border-radius:8px;margin:15px 0;padding:20px;background-color:#f9f9f9;box-shadow:0 2px 4px #0000001a;width:90%;min-height:150px;overflow:hidden;display:flex;flex-direction:column}.post-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:10px;color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.post-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:.9em;color:#666;margin-top:10px}.post-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-bottom:15px;font-size:1em;color:#444;overflow-wrap:break-word;word-wrap:break-word;flex-grow:1;overflow-y:auto}.elegant-button[_ngcontent-%COMP%]{background-color:transparent;color:#2e2e2e;border:2px solid #aaa;padding:.75rem 1.5rem;font-size:1.1rem;font-family:Georgia,serif;letter-spacing:.5px;border-radius:6px;cursor:pointer;transition:all .3s ease;display:inline-block;margin:1rem auto;text-align:center}.elegant-button[_ngcontent-%COMP%]:hover{background-color:#f4f4f4;border-color:#666;color:#1a1a1a}.view-post-button[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.view-post-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:2px solid #4CAF50;padding:8px 16px;font-size:14px;font-family:Arial,sans-serif;border-radius:25px;cursor:pointer;transition:background-color .3s ease,transform .2s ease}.view-post-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#45a049;transform:scale(1.1)}.view-post-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 10px #48b448cc}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;text-align:center;margin:0 auto}.page-title[_ngcontent-%COMP%]{text-align:center;font-size:2.8rem;font-family:Georgia,serif;color:#2e2e2e;margin-top:3rem;margin-bottom:0rem;letter-spacing:.5px;position:relative}.page-title[_ngcontent-%COMP%]:after{content:"";display:block;width:60px;height:2px;background-color:#aaa;margin:.75rem auto 0;opacity:.5}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:10;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#00000080;justify-content:center;align-items:center}.modal.show[_ngcontent-%COMP%]{display:flex}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:10px;max-width:600px;width:90%;box-shadow:0 4px 12px #0000004d;position:relative;display:flex;flex-direction:column}.close-button[_ngcontent-%COMP%]{position:absolute;right:1rem;top:1rem;font-size:1.8rem;cursor:pointer;color:#333;transition:color .3s}.close-button[_ngcontent-%COMP%]:hover{color:#47e}.discussion-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-input[_ngcontent-%COMP%]{padding:1rem;font-size:1rem;margin-top:1rem;margin-bottom:1rem;border-radius:6px;border:1px solid #ddd;background-color:#f9f9f9;transition:border-color .3s;width:94%}.form-input[_ngcontent-%COMP%]:focus{border-color:#47e;box-shadow:0 0 8px #47e3}button[type=submit][_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#47e;color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:background-color .3s,transform .2s}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#35c;transform:translateY(-2px)}button[type=submit][_ngcontent-%COMP%]:active{transform:translateY(1px)}.discussion-content[_ngcontent-%COMP%]{flex-grow:1;padding:1rem;overflow-y:auto}.discussion-form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding-left:4rem;width:100%;height:100%}.discussion-form[_ngcontent-%COMP%]{width:92%;display:flex;flex-direction:column;padding:1.5rem;background-color:#fff;border-radius:8px;box-shadow:0 10px 20px #0000001a;margin-top:2.5rem;border:1px solid #ddd}.discussion-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1.5rem;font-size:1.8rem;text-align:center;font-family:Georgia,serif;font-weight:600;color:#333;font-weight:700}.discussion-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-top:1.2rem;color:#444}.discussion-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .discussion-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:1rem;font-size:1.1rem;margin-top:.75rem;border-radius:6px;border:1px solid #ddd;background-color:#f9f9f9;transition:all .3s ease}.discussion-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .discussion-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#47e;box-shadow:0 0 8px #47e3}.discussion-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:180px;resize:vertical}.discussion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1rem;background-color:#47e;color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:background-color .3s,transform .2s}.discussion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#35c;transform:translateY(-2px)}.discussion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}']})};export{$ as DiscussionComponent};
