import{a,b as p,c as r,f as n,k as l}from"./chunk-7DS7QYNX.js";var c=class i{posts=[];constructor(){let s=localStorage.getItem("posts");s&&(this.posts=JSON.parse(s).map(t=>p(a({},t),{date:new Date(t.date)})))}getPosts(){return n(this.posts)}getPostById(s){let t=this.posts.find(e=>e.id===s);return n(t)}addPost(s){return new r(t=>{try{this.posts.unshift(s),localStorage.setItem("posts",JSON.stringify(this.posts)),t.next(s),t.complete()}catch{t.error("N\xE5got gick fel vid sparandet!")}})}addReplyToPost(s,t){return new r(e=>{try{let o=this.posts.find(f=>f.id===s);o?(o.replies=o.replies||[],o.replies.unshift(t),localStorage.setItem("posts",JSON.stringify(this.posts)),e.next(o),e.complete()):e.error("Inl\xE4gget finns inte!")}catch{e.error("N\xE5got gick fel vid sparandet av svaret!")}})}deletePost(s){return new r(t=>{try{this.posts=this.posts.filter(e=>e.id!==s),localStorage.setItem("posts",JSON.stringify(this.posts)),t.next(this.posts),t.complete()}catch{t.error("N\xE5got gick fel vid radering!")}})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})};export{c as a};
