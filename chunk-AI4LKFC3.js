import{a as U}from"./chunk-KWELZJWS.js";import{a as V,b as j,c as A,d as F,e as W,f as D,h as z,i as H,j as B,n as K}from"./chunk-FDYZ3ILD.js";import{$ as C,A as f,Aa as k,B as T,Ba as L,G as _,J as p,L as o,M as r,O as M,P as h,Q as c,U as a,V as d,W as v,X as S,Z as y,_ as P,da as x,fa as b,ia as R,na as O,oa as E,p as g,pa as I,q as u,qa as w,va as N,y as n}from"./chunk-7DS7QYNX.js";function q(l,t){if(l&1&&(o(0,"li")(1,"p"),a(2),r(),o(3,"p"),a(4),r(),o(5,"p")(6,"span",11),a(7),x(8,"date"),r()()()),l&2){let e=t.$implicit;n(2),d(e.author),n(2),d(e.content),n(3),d(b(8,3,e.date,"yyyy-MM-dd HH:mm"))}}function G(l,t){if(l&1&&(o(0,"div")(1,"h3"),a(2),r(),o(3,"ul"),_(4,q,9,6,"li",22),r()()),l&2){let e=c(2);n(2),d(e.getTranslation("COMMENTS_SECTION")),n(2),p("ngForOf",e.postToReply.replies)}}function J(l,t){if(l&1){let e=M();o(0,"div")(1,"div",7)(2,"div",8)(3,"h2"),a(4),r(),o(5,"p"),a(6),r(),o(7,"div",9)(8,"span",10),a(9),r(),a(10,"\xA0 "),o(11,"span",11),a(12),x(13,"date"),r()()(),o(14,"div",12)(15,"h3"),a(16),r()(),o(17,"div",13)(18,"form",14),h("ngSubmit",function(){g(e);let s=c();return u(s.submitReply())}),o(19,"div",15)(20,"div",16)(21,"input",17),C("ngModelChange",function(s){g(e);let m=c();return P(m.author,s)||(m.author=s),u(s)}),r()(),o(22,"div",16)(23,"input",18),C("ngModelChange",function(s){g(e);let m=c();return P(m.email,s)||(m.email=s),u(s)}),r()()(),o(24,"div",19)(25,"textarea",20),C("ngModelChange",function(s){g(e);let m=c();return P(m.replyContent,s)||(m.replyContent=s),u(s)}),r()(),o(26,"button",21),a(27),r()()(),o(28,"div",12),_(29,G,5,2,"div",1),r()()()}if(l&2){let e=c();n(4),d(e.postToReply.subject),n(2),d(e.postToReply.content),n(3),d(e.postToReply.author),n(3),d(b(13,13,e.postToReply.date,"yyyy-MM-dd HH:mm")),n(4),d(e.getTranslation("LEAVE_COMMENT")),n(5),y("ngModel",e.author),p("placeholder",e.getTranslation("AUTHOR")),n(2),y("ngModel",e.email),p("placeholder",e.getTranslation("EMAIL")),n(2),y("ngModel",e.replyContent),p("placeholder",e.getTranslation("WRITE_REPLY")),n(2),d(e.getTranslation("SUBMIT_REPLY")),n(2),p("ngIf",e.postToReply.replies&&e.postToReply.replies.length>0)}}function X(l,t){if(l&1&&(o(0,"div")(1,"p"),a(2),r()()),l&2){let e=c();n(2),d(e.getTranslation("POST_NOT_FOUND"))}}var Y=class l{constructor(t,e,i,s){this.route=t;this.postService=e;this.languageService=i;this.cdr=s}postId=null;postToReply;replyContent="";posts=[];subject="";author="";email="";content="";currentPage=1;repliesPerPage=5;totalReplies=0;translations={};ngOnInit(){this.postId=this.route.snapshot.paramMap.get("id"),this.postId?this.postService.getPostById(this.postId).subscribe(t=>{t?(this.postToReply=t,this.totalReplies=t.replies?t.replies.length:0,this.loadReplies()):console.error("Post not found")},t=>{console.error("Error fetching post:",t)}):console.error("No post ID found"),this.updateTranslations(),this.languageService.currentLanguage$.subscribe(()=>{this.updateTranslations(),this.cdr.detectChanges()})}loadReplies(){if(this.postToReply){let t=(this.currentPage-1)*this.repliesPerPage,e=t+this.repliesPerPage;this.postToReply.replies=this.postToReply.replies||[],this.postToReply.replies=this.postToReply.replies.sort((i,s)=>s.date.getTime()-i.date.getTime()).slice(t,e)}}onPageChange(t){this.currentPage=t,this.loadReplies()}onRepliesPerPageChange(t){let e=t.target;this.repliesPerPage=Number(e.value),this.currentPage=1,this.loadReplies()}submitReply(){if(this.postToReply&&this.replyContent&&this.postId){let t={id:new Date().toISOString(),subject:`Svar p\xE5: ${this.postToReply.subject}`,email:"Anonym",content:this.replyContent,author:"F\xF6rfattare",date:new Date,replies:[]};this.postToReply.replies=this.postToReply.replies||[],this.postToReply.replies.unshift(t),this.totalReplies=this.postToReply.replies.length,this.loadReplies(),this.postService.addReplyToPost(this.postId,t).subscribe(e=>{this.replyContent="",this.resetForm()})}}resetForm(){this.subject="",this.author="",this.email="",this.content=""}updateTranslations(){let t=this.languageService.getLanguage(),e={REPLY_TO_POST:{sv:"Svara p\xE5 inl\xE4gg",en:"Reply to Post",fi:"Vastaa viestiin",me:"Vastaa viestiin",sa:"V\xE1stidit \u010D\xE1llosa"},LEAVE_COMMENT:{sv:"L\xE4mna en kommentar",en:"Leave a Comment",fi:"J\xE4t\xE4 kommentti",me:"J\xE4t\xE4 kommentti",sa:"\u010C\xE1jeha komment\xE1r"},SUBMIT_REPLY:{sv:"Skicka svar",en:"Submit Reply",fi:"L\xE4het\xE4 vastaus",me:"L\xE4het\xE4 vastaus",sa:"L\xE4het\xE4 vastaus"},COMMENTS_SECTION:{sv:"Kommentarer",en:"Comments",fi:"Kommentit",me:"Kommentit",sa:"Komment\xE1rat"},SHOW:{sv:"Visa",en:"Show",fi:"N\xE4yt\xE4",me:"N\xE4yt\xE4",sa:"\u010C\xE1jeha"},PREVIOUS:{sv:"F\xF6reg\xE5ende",en:"Previous",fi:"Edellinen",me:"Edellinen",sa:"Ovddit"},NEXT:{sv:"N\xE4sta",en:"Next",fi:"Seuraava",me:"Seuraava",sa:"V\xE1st\xE1dus"},PAGE:{sv:"Sida",en:"Page",fi:"Sivu",me:"Sivu",sa:"Siidu"},POST_NOT_FOUND:{sv:"Inl\xE4gget hittades inte",en:"Post not found",fi:"Viesti\xE4 ei l\xF6ytynyt",me:"Viesti\xE4 ei l\xF6ytynyt",sa:"\u010C\xE1llosa ii g\xE1vdnan"},AUTHOR:{sv:"F\xF6rfattare",en:"Author",fi:"Kirjoittaja",me:"Kirjoittaja",sa:"\u010C\xE1llit"},EMAIL:{sv:"E-post",en:"Email",fi:"S\xE4hk\xF6posti",me:"S\xE4hk\xF6posti",sa:"E-poasta"},WRITE_REPLY:{sv:"Skriv ett svar",en:"Write a reply",fi:"Kirjoita vastaus",me:"Kirjoita vastaus",sa:"\u010C\xE1llit v\xE1st\xE1dusa"}};for(let i in e)this.translations[i]=e[i][t]||i}getTranslation(t){return this.translations[t]||t}static \u0275fac=function(e){return new(e||l)(f(N),f(U),f(L),f(R))};static \u0275cmp=T({type:l,selectors:[["app-reply-to-post"]],decls:19,vars:12,consts:[[1,"reply-to-post-container"],[4,"ngIf"],[1,"pagination-controls"],["for","repliesPerPage"],["id","repliesPerPage",3,"change"],[3,"value"],[3,"click","disabled"],[1,"post-container"],[1,"go-to-post"],[1,"meta"],[1,"author"],[1,"date"],[1,"replies-list"],[1,"reply-form"],[3,"ngSubmit"],[1,"author-email-row"],[1,"input-group"],["type","text","id","author","name","author","required","",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["type","email","id","email","name","email","required","",1,"form-input",3,"ngModelChange","ngModel","placeholder"],[1,"textarea-group"],["name","replyContent","id","replyContent","required","",1,"form-input","textarea-content",3,"ngModelChange","ngModel","placeholder"],["type","submit"],[4,"ngFor","ngForOf"]],template:function(e,i){e&1&&(o(0,"div",0),_(1,J,30,16,"div",1),o(2,"div",2)(3,"label",3),a(4),r(),o(5,"select",4),h("change",function(m){return i.onRepliesPerPageChange(m)}),o(6,"option",5),a(7,"10"),r(),o(8,"option",5),a(9,"25"),r(),o(10,"option",5),a(11,"100"),r()(),o(12,"button",6),h("click",function(){return i.onPageChange(i.currentPage-1)}),a(13),r(),o(14,"span"),a(15),r(),o(16,"button",6),h("click",function(){return i.onPageChange(i.currentPage+1)}),a(17),r()(),_(18,X,3,1,"div",1),r()),e&2&&(n(),p("ngIf",i.postToReply),n(3),v("",i.getTranslation("SHOW"),":"),n(2),p("value",10),n(2),p("value",25),n(2),p("value",100),n(2),p("disabled",i.currentPage===1),n(),v(" ",i.getTranslation("PREVIOUS")," "),n(2),S("",i.getTranslation("PAGE")," ",i.currentPage,""),n(),p("disabled",i.currentPage*i.repliesPerPage>=i.totalReplies),n(),v(" ",i.getTranslation("NEXT")," "),n(),p("ngIf",!i.postToReply))},dependencies:[k,K,D,z,H,V,j,A,B,W,F,w,O,E,I],styles:['.post-container[_ngcontent-%COMP%]{background-color:#fafafa;border-radius:1px;box-shadow:none;margin-bottom:1.5rem;padding:1.5rem;position:relative;overflow:hidden;z-index:1}.post-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-1px;background-color:#00000008;border-radius:1px;z-index:-1}.go-to-post[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.05);padding:1.5rem;margin-bottom:1.5rem;position:relative;border-radius:1px}.go-to-post[_ngcontent-%COMP%]:before{display:none}.go-to-post[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:#333;margin-bottom:1rem}.go-to-post[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.15;color:#555;margin-top:1.2rem;margin-bottom:1.2rem}.meta[_ngcontent-%COMP%]{font-size:.9rem;color:#777}.meta[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .meta[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{margin-right:10px}.author-email-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.textarea-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem}.textarea-content[_ngcontent-%COMP%]{min-height:50px;resize:vertical}.reply-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem;background-color:#fff;border-radius:6px;box-shadow:0 4px 6px #0000001a}.reply-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.6rem;color:#333;margin-bottom:1rem}.form-input[_ngcontent-%COMP%]{padding:.8rem;font-size:1rem;margin-top:.5rem;margin-bottom:1rem;border-radius:6px;border:1px solid #ddd;background-color:#fff;transition:border-color .3s}.form-input[_ngcontent-%COMP%]:focus{border-color:#47e;box-shadow:0 0 8px #47e3}button[type=submit][_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#47e;color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:background-color .3s,transform .2s}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#35c;transform:translateY(-2px)}button[type=submit][_ngcontent-%COMP%]:active{transform:translateY(1px)}.replies-list[_ngcontent-%COMP%]{margin-top:0rem;padding-top:1rem;border-top:1px solid #ddd}.replies-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.05);padding:1rem;margin-top:1rem;border-radius:1px;position:relative}.replies-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{display:none}.replies-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#555}.replies-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.6rem;color:#333}.date[_ngcontent-%COMP%]{font-size:.85rem;color:#777}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 15px;background-color:#007bff;color:#fff;border:none;cursor:pointer}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc}']})};export{Y as ReplyToPostComponent};
